services:
  selectzyme-proxy:
    image: nginx:alpine
    # Port forwarding disabled for production runs (profiles or docker-compose.override.yml can be used alternatively)
    #ports:
    #  - "80:80"
    volumes:
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
      - ./nginx/index.html:/usr/share/nginx/html/selectzyme/index.html
      - ./nginx/bootstrap.min.css:/usr/share/nginx/html/selectzyme/bootstrap.min.css      
      - ./assets/:/usr/share/nginx/html/selectzyme/assets/      
    depends_on:
      - selectzyme-demo
      - selectzyme-petase
      - selectzyme-ired
      - selectzyme-lpor
      - selectzyme-lov
      - selectzyme-fmos
    networks:
      - selectzyme-network
      
  selectzyme-demo:
    image: ipb-halle/selectzyme-app:development
    command: --input_dir=/app/data_container/
    environment:
      - DASH_URL_BASE_PATHNAME=/selectzyme/demo/
    volumes:
      - ./data/demo/:/app/data_container/
    networks:
      - selectzyme-network

  selectzyme-petase:
    image: ipb-halle/selectzyme-app:development
    command: --input_dir=/app/data_container/
    environment:
      - DASH_URL_BASE_PATHNAME=/selectzyme/petase/
    volumes:
      - ./data/petase/:/app/data_container/
    networks:
      - selectzyme-network

  selectzyme-ired:
    image: ipb-halle/selectzyme-app:development
    command: --input_dir=/app/data_container/
    environment:
      - DASH_URL_BASE_PATHNAME=/selectzyme/ired/
    volumes:
      - ./data/ired/:/app/data_container/
    networks:
      - selectzyme-network

  selectzyme-lpor:
    image: ipb-halle/selectzyme-app:development
    command: --input_dir=/app/data_container/
    environment:
      - DASH_URL_BASE_PATHNAME=/selectzyme/lpor/
    volumes:
      - ./data/lpor/:/app/data_container/
    networks:
      - selectzyme-network      

  selectzyme-lov:
    image: ipb-halle/selectzyme-app:development
    command: --input_dir=/app/data_container/
    environment:
      - DASH_URL_BASE_PATHNAME=/selectzyme/lov/
    volumes:
      - ./data/lov/:/app/data_container/
    networks:
      - selectzyme-network

  selectzyme-fmos:
    image: ipb-halle/selectzyme-app:development
    command: --input_dir=/app/data_container/
    environment:
      - DASH_URL_BASE_PATHNAME=/selectzyme/fmos/
    volumes:
      - ./data/fmos/:/app/data_container/
    networks:
      - selectzyme-network

networks:
  selectzyme-network:
    driver: bridge
